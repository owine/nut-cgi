# Example docker-compose.yml for local testing and development

services:
  nut-cgi:
    # Use specific version tag in production, not latest
    image: ghcr.io/owine/nut-cgi:latest@sha256:04bae7d113bbc3939f86da093029f680998110e7c5273bcd44f123d83543fe9c

    # Run as non-root user (UID 1000 by default)
    user: "1000:1000"

    # Security: Read-only root filesystem
    read_only: true

    # Security: Writable temp space for PIDs and logs
    tmpfs:
      - /tmp

    # Mount your hosts.conf configuration
    volumes:
      - ./hosts.conf:/etc/nut/hosts.conf:ro

    # Map container port 80 to host port 8000
    ports:
      - "8000:80"

    # Restart policy
    restart: unless-stopped
